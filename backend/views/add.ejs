<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Upload Your Video</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #000;
        font-family: sans-serif;
      }
      .upload-bar {
        display: none !important;
      }
      .upload-bar.show-upload {
        display: flex !important; /* this overrides .upload-bar's display:none */
      }
      .form-container:hover {
        box-shadow: 0 6px 40px rgba(0, 0, 0, 0.8),
          inset 0 0 30px rgba(255, 255, 255, 0.07);
        transform: scale(1.01);
      }
      .form-container {
        max-width: 600px;
        margin: 50px auto;
        padding: 30px;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.15);
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.6),
          inset 0 0 20px rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(18px);
        -webkit-backdrop-filter: blur(18px);
        color: #f5f5f5;
        background-image: linear-gradient(
          to bottom right,
          rgba(255, 255, 255, 0.05),
          rgba(255, 255, 255, 0.01)
        );
      }
      video {
        width: 100%;
        margin-top: 20px;
        display: none;
        border-radius: 12px;
      }
    </style>
  </head>
  <body>
    <div class="form-container">
      <div class="d-flex align-items-center upload-bar">
        <strong>Uploading...</strong>
        <div
          class="spinner-border ms-auto"
          role="status"
          aria-hidden="true"
        ></div>
      </div>
      <h2 class="text-center" style="font-size: 1rem; margin-bottom: 1rem">
        ðŸ‘» Be Anonymous & Upload
      </h2>
      <form action="/newvideo" method="POST" enctype="multipart/form-data">
        <div class="mb-3">
          <label for="title" class="form-label">title?</label>
          <input
            type="text"
            class="form-control"
            id="title"
            name="video[title]"
            value="..."
          />
        </div>
        <div class="mb-3">
          <label for="desc" class="form-label">description?</label>
          <input
            type="text"
            class="form-control"
            id="desc"
            name="video[description]"
            value="..."
          />
        </div>
        <div class="mb-3">
          <label for="name" class="form-label">Name?</label>
          <input
            type="text"
            class="form-control"
            id="name"
            name="video[name]"
            value="Anonymous"
          />
        </div>

        <div class="mb-3">
          <label for="email" class="form-label">Email?</label>
          <input
            type="email"
            class="form-control"
            id="email"
            name="video[email]"
            value="Anonymous@hotmail.com"
          />
        </div>

        <div class="mb-3">
          <label for="video" class="form-label">Choose a Video File</label>
          <input
            class="form-control"
            type="file"
            id="video"
            name="video"
            accept="video/*"
            required
          />
        </div>

        <!-- Video Preview -->
        <video id="videoPreview" controls></video>

        <div class="d-grid mt-4">
          <button type="submit" class="btn btn-primary upload-btn">
            Upload Video
          </button>
        </div>
      </form>
    </div>

    <script>
      const videoInput = document.getElementById("video");
      const videoPreview = document.getElementById("videoPreview");
      const button = document.querySelector(".upload-btn");
      const upload = document.querySelector(".upload-bar");

      videoInput.addEventListener("change", function () {
        button.addEventListener("click", (e) => {
          console.log("fired");
          upload.classList.toggle("show-upload");
        });
        const file = this.files[0];

        if (file && file.type.startsWith("video/")) {
          const videoURL = URL.createObjectURL(file);
          videoPreview.src = videoURL;
          videoPreview.style.display = "block";
        } else {
          videoPreview.src = "";
          videoPreview.style.display = "none";
          alert("Please select a valid video file.");
        }
      });
    </script>
  </body>
</html>
